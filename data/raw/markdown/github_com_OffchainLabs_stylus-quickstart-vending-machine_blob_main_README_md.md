---
url: https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md
title: stylus-quickstart-vending-machine/README.md at main · OffchainLabs/stylus-quickstart-vending-machine · GitHub
category: stylus
subcategory: official_examples_readme
scraped_at: 2025-12-20T10:39:04.557766
---

[Skip to content](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FOffchainLabs%2Fstylus-quickstart-vending-machine%2Fblob%2Fmain%2FREADME.md)
Appearance settings
  * Platform
    * AI CODE CREATION
      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)
      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)
      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)
      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)
    * DEVELOPER WORKFLOWS
      * [ ActionsAutomate any workflow ](https://github.com/features/actions)
      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)
      * [ IssuesPlan and track work ](https://github.com/features/issues)
      * [ Code ReviewManage code changes ](https://github.com/features/code-review)
    * APPLICATION SECURITY
      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)
      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)
      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)
    * EXPLORE
      * [Why GitHub](https://github.com/why-github)
      * [Documentation](https://docs.github.com)
      * [Marketplace](https://github.com/marketplace)
[View all features](https://github.com/features)
  * Solutions
    * BY COMPANY SIZE
      * [Enterprises](https://github.com/enterprise)
      * [Small and medium teams](https://github.com/team)
      * [Startups](https://github.com/enterprise/startups)
      * [Nonprofits](https://github.com/solutions/industry/nonprofits)
    * BY USE CASE
      * [App Modernization](https://github.com/solutions/use-case/app-modernization)
      * [DevSecOps](https://github.com/solutions/use-case/devsecops)
      * [DevOps](https://github.com/solutions/use-case/devops)
      * [CI/CD](https://github.com/solutions/use-case/ci-cd)
      * [View all use cases](https://github.com/solutions/use-case)
    * BY INDUSTRY
      * [Healthcare](https://github.com/solutions/industry/healthcare)
      * [Financial services](https://github.com/solutions/industry/financial-services)
      * [Manufacturing](https://github.com/solutions/industry/manufacturing)
      * [Government](https://github.com/solutions/industry/government)
      * [View all industries](https://github.com/solutions/industry)
[View all solutions](https://github.com/solutions)
  * Resources
    * EXPLORE BY TOPIC
      * [AI](https://github.com/resources/articles?topic=ai)
      * [Software Development](https://github.com/resources/articles?topic=software-development)
      * [DevOps](https://github.com/resources/articles?topic=devops)
      * [Security](https://github.com/resources/articles?topic=security)
      * [View all topics](https://github.com/resources/articles)
    * EXPLORE BY TYPE
      * [Customer stories](https://github.com/customer-stories)
      * [Events & webinars](https://github.com/resources/events)
      * [Ebooks & reports](https://github.com/resources/whitepapers)
      * [Business insights](https://github.com/solutions/executive-insights)
      * [GitHub Skills](https://skills.github.com)
    * SUPPORT & SERVICES
      * [Documentation](https://docs.github.com)
      * [Customer support](https://support.github.com)
      * [Community forum](https://github.com/orgs/community/discussions)
      * [Trust center](https://github.com/trust-center)
      * [Partners](https://github.com/partners)
  * Open Source
    * COMMUNITY
      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)
    * PROGRAMS
      * [Security Lab](https://securitylab.github.com)
      * [Maintainer Community](https://maintainers.github.com)
      * [Accelerator](https://github.com/accelerator)
      * [Archive Program](https://archiveprogram.github.com)
    * REPOSITORIES
      * [Topics](https://github.com/topics)
      * [Trending](https://github.com/trending)
      * [Collections](https://github.com/collections)
  * Enterprise
    * ENTERPRISE SOLUTIONS
      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)
    * AVAILABLE ADD-ONS
      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)
      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)
      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2FOffchainLabs%2Fstylus-quickstart-vending-machine%2Fblob%2Fmain%2FREADME.md)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=OffchainLabs%2Fstylus-quickstart-vending-machine)
Appearance settings
Resetting focus
You signed in with another tab or window. [Reload](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md) to refresh your session. Dismiss alert
{{ message }}
[ OffchainLabs ](https://github.com/OffchainLabs) / **[stylus-quickstart-vending-machine](https://github.com/OffchainLabs/stylus-quickstart-vending-machine) ** Public
  * [ ](https://github.com/login?return_to=%2FOffchainLabs%2Fstylus-quickstart-vending-machine) You must be signed in to change notification settings
  * [ 4 ](https://github.com/login?return_to=%2FOffchainLabs%2Fstylus-quickstart-vending-machine)
  * [ Star  2 ](https://github.com/login?return_to=%2FOffchainLabs%2Fstylus-quickstart-vending-machine)


  * [ Code ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine)
  * [ Issues 0 ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/issues)
  * [ Pull requests 1 ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/pulls)
  * [ Actions ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/actions)
  * [ Projects 0 ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/projects)
  * [ Security ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
[ ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
[ ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
[ ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
### [ Uh oh!  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
[There was an error while loading. ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)[Please reload this page](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md).
  * [ Insights ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/pulse)


Additional navigation options
  * [ Code  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine)
  * [ Issues  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/issues)
  * [ Pull requests  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/pulls)
  * [ Actions  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/actions)
  * [ Projects  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/projects)
  * [ Security  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/security)
  * [ Insights  ](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/pulse)


## Collapse file tree
## Files
main
Search this repository
  * .cargo
  * examples
  * licenses
  * src
  * .env-sample
  * .gitignore
  * Cargo.lock
  * Cargo.toml
  * README.md
  * rust-toolchain.toml


## Breadcrumbs
  1. [stylus-quickstart-vending-machine](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/tree/main)


/
# README.md
Copy path
BlameMore file actions
BlameMore file actions
## Latest commit
## History
[History](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/commits/main/README.md)
[](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/commits/main/README.md)
106 lines (78 loc) · 4.01 KB
## Breadcrumbs
  1. [stylus-quickstart-vending-machine](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/tree/main)


/
# README.md
Top
## File metadata and controls
  * Preview
  * Code
  * Blame


106 lines (78 loc) · 4.01 KB
[Raw](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/raw/refs/heads/main/README.md)
Copy raw file
Download raw file
Outline
Edit and raw actions
# Stylus Cupcake Example
[](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md#stylus-cupcake-example)
An example project for writing Arbitrum Stylus contracts in Rust using the [stylus-sdk](https://github.com/OffchainLabs/stylus-sdk-rs). It includes a Rust implementation of a vending machine Ethereum smart contract.
```
// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.9;

// Rule 2: The vending machine's rules can't be changed by anyone.
contract VendingMachine {
    // state variables = internal memory of the vending machine
    mapping(address => uint) private _cupcakeBalances;
    mapping(address => uint) private _cupcakeDistributionTimes;

    function giveCupcakeTo(address userAddress) public returns (bool) {
        // this code is unnecessary, but we're keeping it here so you can compare it to the JS implementation
        if (_cupcakeDistributionTimes[userAddress] == 0) {
            _cupcakeBalances[userAddress] = 0;
            _cupcakeDistributionTimes[userAddress] = 0;
        }

        // Rule 1: The vending machine will distribute a cupcake to anyone who hasn't recently received one.
        uint fiveSecondsFromLastDistribution = _cupcakeDistributionTimes[userAddress] + 5 seconds;
        bool userCanReceiveCupcake = fiveSecondsFromLastDistribution <= block.timestamp;
        if (userCanReceiveCupcake) {
            _cupcakeBalances[userAddress]++;
            _cupcakeDistributionTimes[userAddress] = block.timestamp;
            return true;
        } else {
            revert("HTTP 429: Too Many Cupcakes (you must wait at least 5 seconds between cupcakes)");
        }
    }

    // Getter function for the cupcake balance of a user
    function getCupcakeBalanceFor(address userAddress) public view returns (uint) {
        return _cupcakeBalances[userAddress];
    }
}
```

### ABI Export
[](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md#abi-export)
You can export the Solidity ABI for your contract by using the `cargo stylus` tool as follows:
```
cargo stylus export-abi
```

which outputs:
```
/**
 * This file was automatically generated by Stylus and represents a Rust contract.
 * For more information, please see [The Stylus SDK](https://github.com/OffchainLabs/stylus-sdk-rs).
 */

interface VendingMachine {
    function giveCupcakeTo(address user_address) external returns (bool);

    function getCupcakeBalanceFor(address user_address) external view returns (uint256);
}
```

## Deploying
[](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md#deploying)
You can use the `cargo stylus` command to deploy your contract to the Stylus-enabled Arbitrum Sepolia testnet. First, we can use the tool to check if our contract compiles to valid WASM for Stylus and verify that the deployment will succeed without submitting a transaction. By default, this will use the Arbitrum Sepolia testnet public RPC endpoint. See 
```
cargo stylus check
```

Next, we deploy:
```
cargo stylus deploy \
  --private-key-path=<PRIVKEY_FILE_PATH>
```

## Calling Your Contract
[](https://github.com/OffchainLabs/stylus-quickstart-vending-machine/blob/main/README.md#calling-your-contract)
This example includes how to call and transact with your contract in Rust using ethers-rs under `examples/vending_machine.rs`. Your contracts are also Ethereum ABI equivalent if using the Stylus SDK, meaning they can be called and transacted with using any other Ethereum tooling.
By using the contract address from your deployment step above and your wallet, you can attempt to call the vending machine contract and interact with it.
To run the example, set the following env vars or place them in a `.env` file this project, then:
```
STYLUS_CONTRACT_ADDRESS=<the onchain address of your deployed contract>
PRIV_KEY_PATH=<the file path for your priv key to transact with>
RPC_URL=https://sepolia-rollup.arbitrum.io/rpc
USER_ADDRESS=<the address of the user you want to interact with>

```

Alternatively, you can copy the `.env-sample` into a `.env` file:
```
cp .env-sample .env

```

Next, run:
```
cargo run --example vending_machine --target=<YOUR_ARCHITECTURE>

```

Where you can find `YOUR_ARCHITECTURE` by running `rustc -vV | grep host`. For M1 Apple computers, for example, this is `aarch64-apple-darwin` and for most Linux x86 it is `x86_64-unknown-linux-gnu`.
## Footer
[ ](https://github.com) © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 



